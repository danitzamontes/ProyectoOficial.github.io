<html>
    <head>
        <meta charset="UTF-8">
        <title>Proyecto Final</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="estilo.css">
        <style>
            p {
                margin: 20px; 
            }
            select{
                margin: 20px;
            }
            #fondomenu {
                background-image: url('header-bg.png');
                width: 100%;
                height: auto;
                background-size: cover;
                background-repeat: no-repeat;
                background-position: center;
                color: white; 
                padding: 20px 0; 
            }
            footer {           
                color: white;
                padding: 35px 0;
                width: 100%; 
                position: relative;
                left: 0;
                bottom: 0;
            }

            .footer-icons a {
                color: white;
                margin: 0 10px;
                font-size: 24px;
                transition: color 0.5s;
            }

            .footer-icons a:hover {
                color: #898f96;
            }
            .image-container img {
                height: 370px; 
                width: 100%;
                object-fit: cover; 
            }
            .recipe-details {
                display: none;
            }  
            .container {
                max-width: 900px;
                margin-top: 30px;
            }
            .formulario{
                padding: 40px;
            }
            table {
                width: 100%;
                margin-top: 30px;
            }
            .table th, .table td {
                text-align: center;
            }
            button {
                margin: 2px;
            }
        </style>
    </head>
    <body class="bg-stone-50 text-gray-900">
        <div>
            <nav class="navbar navbar-expand-lg bg-body-tertiary" id="fondomenu">
                <div class="container-fluid">
                    <a class="navbar-brand" href="index.html">Cafeteria DANNY</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                        <div class="navbar-nav" id="menu">
                            <!--Aqui mi XML-->
                        </div>
                    </div>
                </div>
            </nav>
        </div>
   
        <div>
            <ul id="menu"></ul>
        </div>
        <select id="idioma">
            <option value="es">Español</option>
            <option value="en">English</option>
        </select>
        <div>
            <ul id="juanita"></ul>
        </div>
        <!--body-->
         <!--Personalizacion de las opciones-->
         <div class="container-fluid">
            <h1 id="contenido1" class="text-center">Formulario de pedido de la cafeteria DANNY</h1>
            <form id="data-form" class="mb-4 row formulario">
              <input type="hidden" id="record-id">
        
              <div class="mb-3 col-12">
                <label for="nombre" class="form-label" id="contenido2">Cliente</label>
                <input type="text" id="nombre" class="form-control" required>
              </div>
        
              <div class="mb-3 col-12 col-md-6">
                <label for="bebida" class="form-label" id="contenido3">Seleccionar Bebida</label>
                <select id="bebida" class="form-select" required>
                  <option value="Cafe Expres" id="contenido4">Café Expres</option>
                  <option value="Café americano" id="contenido5">Café americano</option>
                  <option value="Café Latte" id="contenido6">Café Latte</option>
                  <option value="Café Mocha" id="contenido7">Café Mocha</option>
                  <option value="Café Turco" id="contenido8">Café Turco</option>
                  <option value="Té de anís" id="contenido9">Té de anís</option>
                  <option value="Té de menta" id="contenido10">Té de menta</option>
        
                </select>
              </div>
        
              <div class="mb-3 col-12 col-md-6">
                <label for="tama" class="form-label" id="contenido11">Tamaño</label>
                <select id="tama" class="form-select" required>
                  <option value="Pequeño" id="contenido12">Pequeño</option>
                  <option value="Mediano" id="contenido13">Mediano</option>
                  <option value="Grande" id="contenido14">Grande</option>
                </select>
              </div>
        
              <div class="mb-3 col-12 col-md-6">
                <label for="edulzante" class="form-label" id="contenido15">Edulzante</label>
                <select id="edulzante" class="form-select" required>
                  <option value="Estebia" id="contenido16">Estebia</option>
                  <option value="Azucar" id="contenido17">Azúcar</option>
                  <option value="Azucar-morena" id="contenido18">Azúcar morena</option>
                  <option value="sin-azucar" id="contenido19">Sin azúcar</option>
                </select>
              </div>
        
              <div class="mb-3 col-12 col-md-6">
                <label for="aco" class="form-label" id="contenido20">Acompañamiento</label>
                <select id="aco" class="form-select" required>
                  <option value="Galletas" id="contenido21">Galletas</option>
                  <option value="Magdalena" id="contenido22">Magdalena</option>
                  <option value="Dona" id="contenido23">Dona</option>
                  <option value="Queque" id="contenido24">Queque</option>
                  <option value="pie-de-limon" id="contenido25">Pie de limón</option>
                </select>
              </div>
        
              <div class="mb-3 col-12 col-md-6">
                <label for="num-persons" class="form-label" id="contenido26">Cantidad de Pedido:</label>
                <input type="number" id="num-persons" class="form-control" required>
              </div>
        
              <div class="mb-3 col-12">
                <label for="observaciones" class="form-label" id="contenido27">Observaciones</label>
                <input type="text" id="observaciones" class="form-control" required>
              </div>
        
              <div class="mb-3 col-12">
                <div class="form-check">
                  <input type="checkbox" id="confirmation" class="form-check-input" required>
                  <label for="confirmation" class="form-check-label" id="contenido28">Confirmo mi selección</label>
                </div>
              </div>
        
              <div class="col-12">
                <button type="submit" class="btn btn-danger" id="contenido29">Guardar</button>
              </div>
            </form>
        
            <h2 id="contenido30">Pedidos guardados</h2>
            <div class="table-responsive">
              <table class="table table-striped" id="data-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th id="contenido31">Nombre Apellido</th>
                    <th id="contenido32">Seleccionar Bebida</th>
                    <th id="contenido33">Tamaño</th>
                    <th id="contenido34">Edulzante</th>
                    <th id="contenido35">Acompañamiento</th>
                    <th id="contenido36">Cantidad de Pedido</th>
                    <th id="contenido37">Observaciones</th>
                    <th id="contenido38">Confirmación</th>
                    <th id="contenido39">Acciones</th>
                  </tr>
                </thead>
                <tbody>
                </tbody>
              </table>
            </div>
        </div>

          <!-- footer -->
        <footer class="text-center mt-3 w-full w-screen bg-red-400">
            <div class="container">
                <div class="row">
                    <div class="col-12 mb-3">
                        <p class="fs-6">&copy; Cafetería DANNY. Todos los derechos reservados.</p>
                    </div>
                    <div class="col-12">
                        <div class="footer-icons flex justify-center">
                            <a href="https://www.facebook.com" target="_blank" rel="noopener noreferrer" class="mx-3"><i class="fab fa-facebook-f"></i></a>
                            <a href="https://www.instagram.com" target="_blank" rel="noopener noreferrer" class="mx-3"><i class="fab fa-instagram"></i></a>
                            <a href="https://www.twitter.com" target="_blank" rel="noopener noreferrer" class="mx-3"><i class="fab fa-twitter"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <script>
            let data = []; // Almacenamos los datos de la respuesta JSON
            let tableBody = document.getElementById('data-table').querySelector('tbody');
            let form = document.getElementById('data-form');
            let recordIdInput = document.getElementById('record-id');
            let nombre = document.getElementById('nombre');
            let bebidaInput = document.getElementById('bebida');
            let tamaInput = document.getElementById('tama');
            let edulzanteInput = document.getElementById('edulzante');
            let acoInput = document.getElementById('aco');
            let numPersonsInput = document.getElementById('num-persons');
            let observacionesInput = document.getElementById('observaciones');
            let confirmationInput = document.getElementById('confirmation');
        
            // Cargar datos usando XMLHttpRequest
            const xhr = new XMLHttpRequest();
            xhr.open("GET", "formularion.json", true);
            xhr.onload = function() {
              if (xhr.status === 200) {
                const responseData = JSON.parse(xhr.responseText);
                data = responseData;
                renderTable();
              } else {
                console.error("Error al cargar el JSON");
              }
            };
            xhr.send();
        
            function renderTable() {
              tableBody.innerHTML = '';
              data.forEach((record) => {
                let row = document.createElement('tr');
                row.innerHTML = `
                  <td>${record.id}</td>
                  <td>${record.nombre}</td>
                  <td>${record.bebida}</td>
                  <td>${record.tamaño}</td>
                  <td>${record.edulzante}</td>
                  <td>${record.acompañamiento}</td>
                  <td>${record.numPersons}</td>
                  <td>${record.observaciones}</td>
                  <td>${record.confirmation ? 'Confirmado' : 'No Confirmado'}</td>
                  <td>
                    <button class="btn btn-warning btn-sm" onclick="editRecord(${record.id})">Editar</button>
                    <button class="btn btn-danger btn-sm" onclick="deleteRecord(${record.id})">Eliminar</button>
                  </td>
                `;
                tableBody.appendChild(row);
              });
            }
        
            form.addEventListener('submit', (e) => {
              e.preventDefault();
              const id = recordIdInput.value;
              const nombreValue = nombre.value;
              const bebidaValue = bebidaInput.value;
              const tamaValue = tamaInput.value;
              const edulzanteValue = edulzanteInput.value;
              const acoValue = acoInput.value;
              const numPersonsValue = numPersonsInput.value;
              const observacionesValue = observacionesInput.value;
              const confirmationValue = confirmationInput.checked;
        
              if (id) {
                // Editar registro
                const recordIndex = data.findIndex((record) => record.id == id);
                if (recordIndex !== -1) {
                  data[recordIndex] = { id: parseInt(id), nombre: nombreValue, bebida: bebidaValue, tamaño: tamaValue, edulzante: edulzanteValue, acompañamiento: acoValue, numPersons: parseInt(numPersonsValue), observaciones: observacionesValue, confirmation: confirmationValue };
                }
              } else {
                // Agregar nuevo registro
                const newRecord = {
                  id: data.length ? Math.max(...data.map((record) => record.id)) + 1 : 1,
                  nombre: nombreValue,
                  bebida: bebidaValue,
                  tamaño: tamaValue,
                  edulzante: edulzanteValue,
                  acompañamiento: acoValue,
                  numPersons: parseInt(numPersonsValue),
                  observaciones: observacionesValue,
                  confirmation: confirmationValue,
                };
                data.push(newRecord);
              }
        
              renderTable();
              form.reset();
            });
        
            function editRecord(id) {
              const record = data.find((record) => record.id == id);
              if (record) {
                recordIdInput.value = record.id;
                nombre.value = record.nombre;
                bebidaInput.value = record.bebida;
                tamaInput.value = record.tamaño;
                edulzanteInput.value = record.edulzante;
                acoInput.value = record.acompañamiento;
                numPersonsInput.value = record.numPersons;
                observacionesInput.value = record.observaciones;
                confirmationInput.checked = record.confirmation;
              }
            }
        
            function deleteRecord(id) {
              if (confirm('¿Estás seguro de eliminar este registro?')) {
                data = data.filter((record) => record.id != id);
                renderTable();
              }
            }
          </script>
        <script>
            let xmlDoc = null;

            //cargar
            function cargaXML(callback) {
                const xhr = new XMLHttpRequest();
                xhr.open("GET", "menu3-sel-personalizacion.xml", true);
                xhr.onload = function() {
                    if (xhr.status === 200) {
                        const parser = new DOMParser();
                        xmlDoc = parser.parseFromString(xhr.responseText, "application/xml");
                        console.log("XML cargado correctamente"); // Confirmación de carga correcta
                        callback();
                    } else {
                        console.error("No puedo cargar el archivo XML");
                    }
                };
                xhr.send();
            }
        
            function cambioLenguaje(lenguaje) {
                if (!xmlDoc) return;
        
                const menu = document.getElementById("menu");
                const items = xmlDoc.getElementsByTagName("item");
                menu.innerHTML = ""; // Limpiar el contenido del menú
        
                Array.from(items).forEach(item => {
                    const id = item.getAttribute("id");
                    const languageNode = item.getElementsByTagName(lenguaje)[0];
                    if (!languageNode) {
                        console.error(`No se encontró el nodo para el lenguaje: ${lenguaje}`);
                        return;
                    }
        
                    const nameNode = languageNode.getElementsByTagName("name")[0];
                    const linkNode = languageNode.getElementsByTagName("link")[0];
                    if (!nameNode || !linkNode) {
                        console.error("Nodo 'name' o 'link' no encontrado");
                        return;
                    }
        
                    const name = nameNode.textContent;
                    const link = linkNode.textContent;
        
                    if (name && link) {
                        const li = document.createElement("li");
                        li.classList.add("nav-item", "dropdown");
        
                        const a = document.createElement("a");
                        a.classList.add("nav-link", "dropdown-toggle");
                        a.href = link;
                        a.setAttribute("id", `submenu-${id}`);
                        a.setAttribute("role", "button");
                        a.setAttribute("data-bs-toggle", "dropdown");
                        a.setAttribute("aria-expanded", "false");
                        a.textContent = name;
        
                        li.appendChild(a);
        
                        // Crear los submenús
                        const submenuItems = languageNode.getElementsByTagName("submenu")[0];
                        if (submenuItems) {
                            const dropdownMenu = document.createElement("ul");
                            dropdownMenu.classList.add("dropdown-menu");
                            dropdownMenu.setAttribute("aria-labelledby", `submenu-${id}`);
        
                            Array.from(submenuItems.getElementsByTagName("item")).forEach(subItem => {
                                const subItemNameNode = subItem.getElementsByTagName("name")[0];
                                const subItemLinkNode = subItem.getElementsByTagName("link")[0];
                                if (!subItemNameNode || !subItemLinkNode) {
                                    console.error("Nodo 'name' o 'link' no encontrado en submenú");
                                    return;
                                }
        
                                const subItemName = subItemNameNode.textContent;
                                const subItemLink = subItemLinkNode.textContent;
        
                                const subLi = document.createElement("li");
                                const subA = document.createElement("a");
                                subA.classList.add("dropdown-item");
                                subA.href = subItemLink;
                                subA.textContent = subItemName;
                                subLi.appendChild(subA);
                                dropdownMenu.appendChild(subLi);
                            });
        
                            li.appendChild(dropdownMenu);
                        }
        
                        menu.appendChild(li);
                    }
                });
        
                // Agregar id para realizar la internacionalización
                
                const juanita = xmlDoc.querySelector(`text[id="juanita"] > ${lenguaje}`)?.textContent;
                if (juanita) {
                    document.getElementById("juanita").textContent = juanita;
                }
                
                const contenido1= xmlDoc.querySelector(`text[id="contenido1"] > ${lenguaje}`)?.textContent;
                if (contenido1) {
                    document.getElementById("contenido1").textContent = contenido1;
                }
                const contenido2= xmlDoc.querySelector(`text[id="contenido2"] > ${lenguaje}`)?.textContent;
                if (contenido2) {
                    document.getElementById("contenido2").textContent = contenido2;
                }
                const contenido3= xmlDoc.querySelector(`text[id="contenido3"] > ${lenguaje}`)?.textContent;
                if (contenido3) {
                    document.getElementById("contenido3").textContent = contenido3;
                }
                const contenido4= xmlDoc.querySelector(`text[id="contenido4"] > ${lenguaje}`)?.textContent;
                if (contenido4) {
                    document.getElementById("contenido4").textContent = contenido4;
                }
                const contenido5= xmlDoc.querySelector(`text[id="contenido5"] > ${lenguaje}`)?.textContent;
                if (contenido5) {
                    document.getElementById("contenido5").textContent = contenido5;
                }
                const contenido6= xmlDoc.querySelector(`text[id="contenido6"] > ${lenguaje}`)?.textContent;
                if (contenido6) {
                    document.getElementById("contenido6").textContent = contenido6;
                }
                const contenido7= xmlDoc.querySelector(`text[id="contenido7"] > ${lenguaje}`)?.textContent;
                if (contenido7) {
                    document.getElementById("contenido7").textContent = contenido7;
                }
                const contenido8= xmlDoc.querySelector(`text[id="contenido8"] > ${lenguaje}`)?.textContent;
                if (contenido8) {
                    document.getElementById("contenido8").textContent = contenido8;
                }
                const contenido9= xmlDoc.querySelector(`text[id="contenido9"] > ${lenguaje}`)?.textContent;
                if (contenido9) {
                    document.getElementById("contenido9").textContent = contenido9;
                }
                const contenido10= xmlDoc.querySelector(`text[id="contenido10"] > ${lenguaje}`)?.textContent;
                if (contenido10) {
                    document.getElementById("contenido10").textContent = contenido10;
                }
                const contenido11= xmlDoc.querySelector(`text[id="contenido11"] > ${lenguaje}`)?.textContent;
                if (contenido11) {
                    document.getElementById("contenido11").textContent = contenido11;
                }
                const contenido12= xmlDoc.querySelector(`text[id="contenido12"] > ${lenguaje}`)?.textContent;
                if (contenido12) {
                    document.getElementById("contenido12").textContent = contenido12;
                }
                const contenido13= xmlDoc.querySelector(`text[id="contenido13"] > ${lenguaje}`)?.textContent;
                if (contenido13) {
                    document.getElementById("contenido13").textContent = contenido13;
                }
                const contenido14= xmlDoc.querySelector(`text[id="contenido14"] > ${lenguaje}`)?.textContent;
                if (contenido14) {
                    document.getElementById("contenido14").textContent = contenido14;
                }
                const contenido15= xmlDoc.querySelector(`text[id="contenido15"] > ${lenguaje}`)?.textContent;
                if (contenido15) {
                    document.getElementById("contenido15").textContent = contenido15;
                }
                const contenido16= xmlDoc.querySelector(`text[id="contenido16"] > ${lenguaje}`)?.textContent;
                if (contenido16) {
                    document.getElementById("contenido16").textContent = contenido16;
                }
                const contenido17= xmlDoc.querySelector(`text[id="contenido17"] > ${lenguaje}`)?.textContent;
                if (contenido17) {
                    document.getElementById("contenido17").textContent = contenido17;
                }
                const contenido18= xmlDoc.querySelector(`text[id="contenido18"] > ${lenguaje}`)?.textContent;
                if (contenido18) {
                    document.getElementById("contenido18").textContent = contenido18;
                }
                const contenido19= xmlDoc.querySelector(`text[id="contenido19"] > ${lenguaje}`)?.textContent;
                if (contenido19) {
                    document.getElementById("contenido19").textContent = contenido19;
                }
                const contenido20= xmlDoc.querySelector(`text[id="contenido20"] > ${lenguaje}`)?.textContent;
                if (contenido20) {
                    document.getElementById("contenido20").textContent = contenido20;
                }
                const contenido21= xmlDoc.querySelector(`text[id="contenido21"] > ${lenguaje}`)?.textContent;
                if (contenido21) {
                    document.getElementById("contenido21").textContent = contenido21;
                }
                const contenido22= xmlDoc.querySelector(`text[id="contenido22"] > ${lenguaje}`)?.textContent;
                if (contenido22) {
                    document.getElementById("contenido22").textContent = contenido22;
                }
                const contenido23= xmlDoc.querySelector(`text[id="contenido23"] > ${lenguaje}`)?.textContent;
                if (contenido23) {
                    document.getElementById("contenido23").textContent = contenido23;
                }
                const contenido24= xmlDoc.querySelector(`text[id="contenido24"] > ${lenguaje}`)?.textContent;
                if (contenido24) {
                    document.getElementById("contenido24").textContent = contenido24;
                }
                const contenido25= xmlDoc.querySelector(`text[id="contenido25"] > ${lenguaje}`)?.textContent;
                if (contenido25) {
                    document.getElementById("contenido25").textContent = contenido25;
                }
                const contenido26= xmlDoc.querySelector(`text[id="contenido26"] > ${lenguaje}`)?.textContent;
                if (contenido26) {
                    document.getElementById("contenido26").textContent = contenido26;
                }
                const contenido27= xmlDoc.querySelector(`text[id="contenido27"] > ${lenguaje}`)?.textContent;
                if (contenido27) {
                    document.getElementById("contenido27").textContent = contenido27;
                }
                const contenido28= xmlDoc.querySelector(`text[id="contenido28"] > ${lenguaje}`)?.textContent;
                if (contenido28) {
                    document.getElementById("contenido28").textContent = contenido28;
                }
                const contenido29= xmlDoc.querySelector(`text[id="contenido29"] > ${lenguaje}`)?.textContent;
                if (contenido29) {
                    document.getElementById("contenido29").textContent = contenido29;
                }
                const contenido30= xmlDoc.querySelector(`text[id="contenido30"] > ${lenguaje}`)?.textContent;
                if (contenido30) {
                    document.getElementById("contenido30").textContent = contenido30;
                }
                const contenido31= xmlDoc.querySelector(`text[id="contenido31"] > ${lenguaje}`)?.textContent;
                if (contenido31) {
                    document.getElementById("contenido31").textContent = contenido31;
                }
                const contenido32= xmlDoc.querySelector(`text[id="contenido32"] > ${lenguaje}`)?.textContent;
                if (contenido32) {
                    document.getElementById("contenido32").textContent = contenido32;
                }
                const contenido33= xmlDoc.querySelector(`text[id="contenido33"] > ${lenguaje}`)?.textContent;
                if (contenido30) {
                    document.getElementById("contenido33").textContent = contenido33;
                }
                const contenido34= xmlDoc.querySelector(`text[id="contenido34"] > ${lenguaje}`)?.textContent;
                if (contenido34) {
                    document.getElementById("contenido34").textContent = contenido34;
                }
                const contenido35= xmlDoc.querySelector(`text[id="contenido35"] > ${lenguaje}`)?.textContent;
                if (contenido35) {
                    document.getElementById("contenido35").textContent = contenido35;
                }
                const contenido36= xmlDoc.querySelector(`text[id="contenido36"] > ${lenguaje}`)?.textContent;
                if (contenido36) {
                    document.getElementById("contenido36").textContent = contenido36;
                }
                const contenido37= xmlDoc.querySelector(`text[id="contenido37"] > ${lenguaje}`)?.textContent;
                if (contenido37) {
                    document.getElementById("contenido37").textContent = contenido37;
                }
                const contenido38= xmlDoc.querySelector(`text[id="contenido38"] > ${lenguaje}`)?.textContent;
                if (contenido38) {
                    document.getElementById("contenido38").textContent = contenido38;
                }
                const contenido39= xmlDoc.querySelector(`text[id="contenido39"] > ${lenguaje}`)?.textContent;
                if (contenido39) {
                    document.getElementById("contenido39").textContent = contenido39;
                }
            }
        
            // idioma
            document.getElementById('idioma').addEventListener('change', (event) => {
                cambioLenguaje(event.target.value);
            });
            cargaXML(() => {
                cambioLenguaje('es');
            });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        
    </body>
</html>